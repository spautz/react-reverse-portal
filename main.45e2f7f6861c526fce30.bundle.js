(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return createHtmlPortalNode})),__webpack_require__.d(__webpack_exports__,"d",(function(){return createSvgPortalNode})),__webpack_require__.d(__webpack_exports__,"a",(function(){return InPortal})),__webpack_require__.d(__webpack_exports__,"b",(function(){return OutPortal}));__webpack_require__(174),__webpack_require__(173),__webpack_require__(70),__webpack_require__(69),__webpack_require__(163);var _extendStatics,react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react_dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(119),__extends=(_extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),createPortalNode=function(elementType){var parent,lastPlaceholder,element,initialProps={};if("html"===elementType)element=document.createElement("div");else{if("svg"!==elementType)throw new Error('Invalid element type "'+elementType+'" for createPortalNode: must be "html" or "svg".');element=document.createElementNS("http://www.w3.org/2000/svg","g")}var portalNode={element:element,elementType:elementType,setPortalProps:function setPortalProps(props){initialProps=props},getInitialPortalProps:function getInitialPortalProps(){return initialProps},mount:function mount(newParent,newPlaceholder){if(newPlaceholder!==lastPlaceholder){if(portalNode.unmount(),newParent!==parent&&!function(domElement,elementType){if("html"===elementType)return domElement instanceof HTMLElement;if("svg"===elementType)return domElement instanceof SVGElement;throw new Error('Unrecognized element type "'+elementType+'" for validateElementType.')}(newParent,elementType))throw new Error('Invalid element type for portal: "'+elementType+'" portalNodes must be used with '+elementType+" elements, but OutPortal is within <"+newParent.tagName+">.");newParent.replaceChild(portalNode.element,newPlaceholder),parent=newParent,lastPlaceholder=newPlaceholder}},unmount:function unmount(expectedPlaceholder){expectedPlaceholder&&expectedPlaceholder!==lastPlaceholder||parent&&lastPlaceholder&&(parent.replaceChild(lastPlaceholder,portalNode.element),parent=void 0,lastPlaceholder=void 0)}};return portalNode},InPortal=function(_super){function InPortal(props){var _this=_super.call(this,props)||this;return _this.addPropsChannel=function(){Object.assign(_this.props.node,{setPortalProps:function setPortalProps(props){_this.setState({nodeProps:props})}})},_this.state={nodeProps:_this.props.node.getInitialPortalProps()},_this}return __extends(InPortal,_super),InPortal.prototype.componentDidMount=function(){this.addPropsChannel()},InPortal.prototype.componentDidUpdate=function(){this.addPropsChannel()},InPortal.prototype.render=function(){var _this=this,_a=this.props,children=_a.children,node=_a.node;return react_dom__WEBPACK_IMPORTED_MODULE_6__.createPortal(react__WEBPACK_IMPORTED_MODULE_5__.Children.map(children,(function(child){return react__WEBPACK_IMPORTED_MODULE_5__.isValidElement(child)?react__WEBPACK_IMPORTED_MODULE_5__.cloneElement(child,_this.state.nodeProps):child})),node.element)},InPortal}(react__WEBPACK_IMPORTED_MODULE_5__.PureComponent),OutPortal=function(_super){function OutPortal(props){var _this=_super.call(this,props)||this;return _this.placeholderNode=react__WEBPACK_IMPORTED_MODULE_5__.createRef(),_this.passPropsThroughPortal(),_this}return __extends(OutPortal,_super),OutPortal.prototype.passPropsThroughPortal=function(){var propsForTarget=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(propsForTarget)},OutPortal.prototype.componentDidMount=function(){var node=this.props.node;this.currentPortalNode=node;var placeholder=this.placeholderNode.current,parent=placeholder.parentNode;node.mount(parent,placeholder),this.passPropsThroughPortal()},OutPortal.prototype.componentDidUpdate=function(){var node=this.props.node;this.currentPortalNode&&node!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=node);var placeholder=this.placeholderNode.current,parent=placeholder.parentNode;node.mount(parent,placeholder),this.passPropsThroughPortal()},OutPortal.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},OutPortal.prototype.render=function(){return react__WEBPACK_IMPORTED_MODULE_5__.createElement("div",{ref:this.placeholderNode})},OutPortal}(react__WEBPACK_IMPORTED_MODULE_5__.PureComponent),createHtmlPortalNode=createPortalNode.bind(null,"html"),createSvgPortalNode=createPortalNode.bind(null,"svg")},276:function(module,exports,__webpack_require__){__webpack_require__(277),__webpack_require__(435),module.exports=__webpack_require__(436)},344:function(module,exports){},436:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(37),__webpack_require__(38),__webpack_require__(19),__webpack_require__(17),__webpack_require__(24);var _storybook_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(76),req=__webpack_require__(634);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_5__.configure)((function loadStories(){req.keys().forEach((function(filename){return req(filename)}))}),module)}.call(this,__webpack_require__(147)(module))},634:function(module,exports,__webpack_require__){var map={"./html.stories.js":635,"./svg.stories.js":639};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=634},635:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(23),__webpack_require__(30),__webpack_require__(31),__webpack_require__(19),__webpack_require__(32),__webpack_require__(24),__webpack_require__(73),__webpack_require__(54),__webpack_require__(55),__webpack_require__(17),__webpack_require__(56),__webpack_require__(175),__webpack_require__(69),__webpack_require__(636),__webpack_require__(108),__webpack_require__(48);var _video,_hr,_p,_p2,_hr2,_p3,_p4,_hr3,_p5,_p6,_hr4,_p7,react__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_16__),_storybook_react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(76),___WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(2);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var withSourceLoader=__webpack_require__(118).withSource,__STORY__=(__webpack_require__(118).addSource,"import React from 'react';\n\nimport { storiesOf } from '@storybook/react';\n\nimport { createHtmlPortalNode, createSvgPortalNode, InPortal, OutPortal } from '..';\n\nconst Container = (props) =>\n    <div style={{ \"border\": \"1px solid #222\", \"padding\": \"10px\" }}>\n        { props.children }\n    </div>;\n\nstoriesOf('Portals', module)\n    .add('render things in different places', () => {\n        const portalNode = createHtmlPortalNode();\n\n        return <div>\n            <div>\n                Portal defined here:\n                <InPortal node={portalNode}>\n                    Hi!\n                </InPortal>\n            </div>\n\n            <div>\n                Portal renders here:\n                <OutPortal node={portalNode} />\n            </div>\n        </div>;\n    })\n    .add('persist DOM whilst moving', () => {\n        const portalNode = createHtmlPortalNode();\n\n        return React.createElement(() => {\n            const [useOuterDiv, setDivToUse] = React.useState(false);\n\n            return <div>\n                <InPortal node={portalNode}>\n                    <video src=\"https://media.giphy.com/media/l0HlKghz8IvrQ8TYY/giphy.mp4\" controls loop />\n                </InPortal>\n\n                <button onClick={() => setDivToUse(!useOuterDiv)}>\n                    Click to move the OutPortal\n                </button>\n\n                <hr/>\n\n                <div>\n                    <p>Outer OutPortal:</p>\n                    { useOuterDiv === true && <OutPortal node={portalNode} /> }\n                    <Container>\n                        <Container>\n                            <Container>\n                                <p>Inner OutPortal:</p>\n                                { useOuterDiv === false && <OutPortal node={portalNode} /> }\n                            </Container>\n                        </Container>\n                    </Container>\n                </div>\n            </div>;\n        })\n    })\n    .add('persist component state whilst moving', () => {\n        const portalNode = createHtmlPortalNode();\n\n        const Counter = () => {\n            const [count, setCount] = React.useState(0);\n\n            return <div>\n                Count is { count }\n                <button onClick={() => setCount(count + 1)}>\n                    +1\n                </button>\n            </div>;\n        };\n\n        return React.createElement(() => {\n            const [useOuterDiv, setDivToUse] = React.useState(false);\n\n            return <div>\n                <InPortal node={portalNode}>\n                    <Counter />\n                </InPortal>\n\n                <button onClick={() => setDivToUse(!useOuterDiv)}>\n                    Click to move the OutPortal\n                </button>\n\n                <hr/>\n\n                <p>Outer OutPortal:</p>\n                { useOuterDiv === true && <OutPortal node={portalNode} /> }\n                <Container>\n                    <Container>\n                        <Container>\n                            <p>Inner OutPortal:</p>\n                            { useOuterDiv === false && <OutPortal node={portalNode} /> }\n                        </Container>\n                    </Container>\n                </Container>\n            </div>\n        });\n    })\n    .add('can set props remotely whilst moving', () => {\n        const portalNode = createHtmlPortalNode();\n\n        const Counter = (props) => {\n            const [count, setCount] = React.useState(0);\n\n            return <div style={{ \"background-color\": props.bgColor }}>\n                Count is { count }\n                <button onClick={() => setCount(count + 1)}>\n                    +1\n                </button>\n            </div>;\n        };\n\n        return React.createElement(() => {\n            const [useOuterDiv, setDivToUse] = React.useState(false);\n\n            return <div>\n                <InPortal node={portalNode}>\n                    <Counter bgColor=\"#faa\" />\n                </InPortal>\n\n                <button onClick={() => setDivToUse(!useOuterDiv)}>\n                    Click to move the OutPortal\n                </button>\n\n                <hr/>\n\n                <p>Outer OutPortal:</p>\n                { useOuterDiv === true &&\n                    <OutPortal node={portalNode} bgColor=\"#aaf\" />\n                }\n                <Container>\n                    <Container>\n                        <Container>\n                            <p>Inner OutPortal:</p>\n                            { useOuterDiv === false &&\n                                <OutPortal node={portalNode} bgColor=\"#afa\" />\n                            }\n                        </Container>\n                    </Container>\n                </Container>\n            </div>\n        });\n    })\n    .add('can switch between portals safely', () => {\n        const portalNode1 = createHtmlPortalNode();\n        const portalNode2 = createHtmlPortalNode();\n\n        const Counter = () => {\n            const [count, setCount] = React.useState(0);\n\n            return <div>\n                Count is { count }\n                <button onClick={() => setCount(count + 1)}>\n                    +1\n                </button>\n            </div>;\n        };\n\n        return React.createElement(() => {\n            const [isPortalSwitched, switchPortal] = React.useState(false);\n\n            let portalNode = isPortalSwitched ? portalNode2 : portalNode1;\n\n            return <div>\n                <InPortal node={portalNode1}>\n                    <Counter />\n                </InPortal>\n                <InPortal node={portalNode2}>\n                    <Counter />\n                </InPortal>\n\n                <button onClick={() => switchPortal(!isPortalSwitched)}>\n                    Click to swap the portal shown\n                </button>\n\n                <hr/>\n\n                <p>Inner OutPortal:</p>\n                <OutPortal node={portalNode} />\n            </div>\n        });\n    })\n    .add('renders reliably, even with frequent changes and multiple portals', () => {\n        const portalNode = createHtmlPortalNode();\n\n        const Target = (p) => p.value.toString();\n\n        const Parent = () => {\n            const [state, setState] = React.useState(false);\n\n            // Change frequently, to hunt for race conditions. On leaving this story, this might\n            // complain about calling setState after unmount - that's totally fine, we don't care.\n            // There should be no other errors though.\n            setTimeout(() => {\n                setState(!state);\n            }, 100);\n\n            return <div>\n                Portal flickers between 2 / 3 / nothing here:\n                { state\n                    // What happens if you render the same portal twice?\n                    ? <>\n                        <OutPortal node={portalNode} value={1} />\n                        <OutPortal node={portalNode} value={2} />\n                    </>\n                    // What happens if you switch from 2 portals to 1, to 2 to zero, at random?\n                    : Math.random() > 0.5\n                        ? <OutPortal node={portalNode} value={3} />\n                        : null\n                }\n            </div>;\n        }\n\n        return <div>\n            <div>\n                Portal defined here:\n                <InPortal node={portalNode}>\n                    <Target value='unmounted' />\n                </InPortal>\n            </div>\n\n            <Parent />\n        </div>;\n    })\n    .add(\"swap nodes between different locations\", () => {\n        const numberOfNodes = 5;\n        const initialOrder = [];\n        for (let i = 0; i < numberOfNodes; i++) {\n          initialOrder[i] = i;\n        }\n    \n        const ExampleContent = ({ content }) => String(content);\n    \n        const ChangeLayoutWithoutUnmounting = () => {\n          const nodes = React.useMemo(\n            () => initialOrder.map(createHtmlPortalNode),\n            []\n          );\n          const [order, setOrder] = React.useState(initialOrder);\n          return (\n            <div>\n              <button onClick={() => setOrder(order.slice().reverse())}>\n                Click to reverse the order\n              </button>\n              {nodes.map((node, index) => (\n                <InPortal node={node}>\n                  <ExampleContent content={index} />\n                </InPortal>\n              ))}\n              {order.map((position) => (\n                <OutPortal node={nodes[position]} />\n              ))}\n            </div>\n          );\n        };\n    \n        return <ChangeLayoutWithoutUnmounting />;\n    })\n    .add('Example from README', () => {\n        const MyExpensiveComponent = () => 'expensive!';\n\n        const MyComponent = (props) => {\n            const portalNode = React.useMemo(() => createHtmlPortalNode(), []);\n\n            return <div>\n                {/*\n                    Create the content that you want to move around.\n                    InPortals render as normal, but to detached DOM.\n                    Until this is used MyExpensiveComponent will not\n                    appear anywhere in the page.\n                */}\n                <InPortal node={portalNode}>\n                    <MyExpensiveComponent\n                        // Optionally provide props to use before this enters the DOM\n                        myProp={\"defaultValue\"}\n                    />\n                </InPortal>\n\n                {/* ... The rest of your UI ... */}\n\n                {/* Pass the node to whoever might want to show it: */}\n                { props.componentToShow === 'component-a'\n                    ? <ComponentA portalNode={portalNode} />\n                    : <ComponentB portalNode={portalNode} /> }\n            </div>;\n        }\n\n        const ComponentA = (props) => {\n            return <div>\n                {/* ... Some more UI ... */}\n\n                A:\n\n                <OutPortal\n                    node={props.portalNode} // Show the content from this node here\n                />\n            </div>;\n        }\n\n        const ComponentB = (props) => {\n            return <div>\n                {/* ... Some more UI ... */}\n\n                B:\n\n                <OutPortal\n                    node={props.portalNode} // Pull in the content from this node\n\n                    myProp={\"newValue\"}     // Optionally, override default values\n                    myOtherProp={123}       // Or add new props\n\n                    // These props go back to the InPortal, and trigger a component\n                    // update (but on the same component instance) as if they had\n                    // been passed directly.\n                />\n            </div>;\n        }\n\n        return <MyComponent componentToShow='component-a' />\n    });\n"),__ADDS_MAP__={"portals--example-from-readme":{startLoc:{col:9,line:263},endLoc:{col:5,line:324},startBody:{col:32,line:263},endBody:{col:5,line:324}},"portals--swap-nodes-between-different-locations":{startLoc:{col:9,line:229},endLoc:{col:5,line:262},startBody:{col:51,line:229},endBody:{col:5,line:262}},"portals--renders-reliably-even-with-frequent-changes-and-multiple-portals":{startLoc:{col:9,line:187},endLoc:{col:5,line:228},startBody:{col:78,line:187},endBody:{col:5,line:228}},"portals--can-switch-between-portals-safely":{startLoc:{col:9,line:148},endLoc:{col:5,line:186},startBody:{col:46,line:148},endBody:{col:5,line:186}},"portals--can-set-props-remotely-whilst-moving":{startLoc:{col:9,line:103},endLoc:{col:5,line:147},startBody:{col:49,line:103},endBody:{col:5,line:147}},"portals--persist-component-state-whilst-moving":{startLoc:{col:9,line:62},endLoc:{col:5,line:102},startBody:{col:50,line:62},endBody:{col:5,line:102}},"portals--persist-dom-whilst-moving":{startLoc:{col:9,line:30},endLoc:{col:5,line:61},startBody:{col:38,line:30},endBody:{col:5,line:61}},"portals--render-things-in-different-places":{startLoc:{col:9,line:13},endLoc:{col:5,line:29},startBody:{col:46,line:13},endBody:{col:5,line:29}}},Container=function(props){return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",{style:{border:"1px solid #222",padding:"10px"}},props.children)};Container.displayName="Container",Object(_storybook_react__WEBPACK_IMPORTED_MODULE_17__.storiesOf)("Portals",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/html.stories.js",[],{},"/home/runner/work/react-reverse-portal/react-reverse-portal/stories",{})).add("render things in different places",(function(){var portalNode=Object(___WEBPACK_IMPORTED_MODULE_18__.c)();return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,"Portal defined here:",react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.a,{node:portalNode},"Hi!")),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,"Portal renders here:",react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:portalNode})))})).add("persist DOM whilst moving",(function(){var _InPortal,_OutPortal,_OutPortal2,portalNode=Object(___WEBPACK_IMPORTED_MODULE_18__.c)();return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement((function(){var _React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_16___default.a.useState(!1),2),useOuterDiv=_React$useState2[0],setDivToUse=_React$useState2[1];return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,_InPortal||(_InPortal=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.a,{node:portalNode},_video||(_video=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("video",{src:"https://media.giphy.com/media/l0HlKghz8IvrQ8TYY/giphy.mp4",controls:!0,loop:!0})))),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("button",{onClick:function onClick(){return setDivToUse(!useOuterDiv)}},"Click to move the OutPortal"),_hr||(_hr=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("hr",null)),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,_p||(_p=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("p",null,"Outer OutPortal:")),!0===useOuterDiv&&(_OutPortal||(_OutPortal=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:portalNode}))),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Container,null,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Container,null,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Container,null,_p2||(_p2=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("p",null,"Inner OutPortal:")),!1===useOuterDiv&&(_OutPortal2||(_OutPortal2=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:portalNode}))))))))}))})).add("persist component state whilst moving",(function(){var _InPortal2,_OutPortal3,_OutPortal4,portalNode=Object(___WEBPACK_IMPORTED_MODULE_18__.c)(),Counter=function(){var _React$useState4=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_16___default.a.useState(0),2),count=_React$useState4[0],setCount=_React$useState4[1];return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,"Count is ",count,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("button",{onClick:function onClick(){return setCount(count+1)}},"+1"))};return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement((function(){var _React$useState6=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_16___default.a.useState(!1),2),useOuterDiv=_React$useState6[0],setDivToUse=_React$useState6[1];return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,_InPortal2||(_InPortal2=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.a,{node:portalNode},react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Counter,null))),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("button",{onClick:function onClick(){return setDivToUse(!useOuterDiv)}},"Click to move the OutPortal"),_hr2||(_hr2=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("hr",null)),_p3||(_p3=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("p",null,"Outer OutPortal:")),!0===useOuterDiv&&(_OutPortal3||(_OutPortal3=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:portalNode}))),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Container,null,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Container,null,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Container,null,_p4||(_p4=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("p",null,"Inner OutPortal:")),!1===useOuterDiv&&(_OutPortal4||(_OutPortal4=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:portalNode})))))))}))})).add("can set props remotely whilst moving",(function(){var _InPortal3,_OutPortal5,_OutPortal6,portalNode=Object(___WEBPACK_IMPORTED_MODULE_18__.c)(),Counter=function(props){var _React$useState8=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_16___default.a.useState(0),2),count=_React$useState8[0],setCount=_React$useState8[1];return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",{style:{"background-color":props.bgColor}},"Count is ",count,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("button",{onClick:function onClick(){return setCount(count+1)}},"+1"))};return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement((function(){var _React$useState10=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_16___default.a.useState(!1),2),useOuterDiv=_React$useState10[0],setDivToUse=_React$useState10[1];return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,_InPortal3||(_InPortal3=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.a,{node:portalNode},react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Counter,{bgColor:"#faa"}))),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("button",{onClick:function onClick(){return setDivToUse(!useOuterDiv)}},"Click to move the OutPortal"),_hr3||(_hr3=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("hr",null)),_p5||(_p5=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("p",null,"Outer OutPortal:")),!0===useOuterDiv&&(_OutPortal5||(_OutPortal5=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:portalNode,bgColor:"#aaf"}))),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Container,null,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Container,null,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Container,null,_p6||(_p6=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("p",null,"Inner OutPortal:")),!1===useOuterDiv&&(_OutPortal6||(_OutPortal6=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:portalNode,bgColor:"#afa"})))))))}))})).add("can switch between portals safely",(function(){var _InPortal4,_InPortal5,portalNode1=Object(___WEBPACK_IMPORTED_MODULE_18__.c)(),portalNode2=Object(___WEBPACK_IMPORTED_MODULE_18__.c)(),Counter=function(){var _React$useState12=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_16___default.a.useState(0),2),count=_React$useState12[0],setCount=_React$useState12[1];return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,"Count is ",count,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("button",{onClick:function onClick(){return setCount(count+1)}},"+1"))};return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement((function(){var _React$useState14=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_16___default.a.useState(!1),2),isPortalSwitched=_React$useState14[0],switchPortal=_React$useState14[1],portalNode=isPortalSwitched?portalNode2:portalNode1;return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,_InPortal4||(_InPortal4=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.a,{node:portalNode1},react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Counter,null))),_InPortal5||(_InPortal5=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.a,{node:portalNode2},react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Counter,null))),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("button",{onClick:function onClick(){return switchPortal(!isPortalSwitched)}},"Click to swap the portal shown"),_hr4||(_hr4=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("hr",null)),_p7||(_p7=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("p",null,"Inner OutPortal:")),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:portalNode}))}))})).add("renders reliably, even with frequent changes and multiple portals",(function(){var _OutPortal7,_OutPortal8,_OutPortal9,portalNode=Object(___WEBPACK_IMPORTED_MODULE_18__.c)(),Parent=function(){var _React$useState16=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_16___default.a.useState(!1),2),state=_React$useState16[0],setState=_React$useState16[1];return setTimeout((function(){setState(!state)}),100),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,"Portal flickers between 2 / 3 / nothing here:",state?react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_16___default.a.Fragment,null,_OutPortal7||(_OutPortal7=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:portalNode,value:1})),_OutPortal8||(_OutPortal8=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:portalNode,value:2}))):.5<Math.random()?_OutPortal9||(_OutPortal9=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:portalNode,value:3})):null)};return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,"Portal defined here:",react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.a,{node:portalNode},react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement((function Target(p){return p.value.toString()}),{value:"unmounted"}))),react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(Parent,null))})).add("swap nodes between different locations",(function(){for(var initialOrder=[],i=0;i<5;i++)initialOrder[i]=i;var ExampleContent=function(_ref){return _ref.content+""};return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement((function ChangeLayoutWithoutUnmounting(){var nodes=react__WEBPACK_IMPORTED_MODULE_16___default.a.useMemo((function(){return initialOrder.map(___WEBPACK_IMPORTED_MODULE_18__.c)}),[]),_React$useState18=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_16___default.a.useState(initialOrder),2),order=_React$useState18[0],setOrder=_React$useState18[1];return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("button",{onClick:function onClick(){return setOrder(order.slice().reverse())}},"Click to reverse the order"),nodes.map((function(node,index){return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.a,{node:node},react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(ExampleContent,{content:index}))})),order.map((function(position){return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:nodes[position]})})))}),null)})).add("Example from README",(function(){var _MyExpensiveComponent,MyExpensiveComponent=function(){return"expensive!"},MyComponent=function(props){var portalNode=react__WEBPACK_IMPORTED_MODULE_16___default.a.useMemo((function(){return Object(___WEBPACK_IMPORTED_MODULE_18__.c)()}),[]);return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.a,{node:portalNode},_MyExpensiveComponent||(_MyExpensiveComponent=react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(MyExpensiveComponent,{myProp:"defaultValue"}))),"component-a"===props.componentToShow?react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(ComponentA,{portalNode:portalNode}):react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(ComponentB,{portalNode:portalNode}))},ComponentA=function(props){return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,"A:",react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:props.portalNode}))},ComponentB=function(props){return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement("div",null,"B:",react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(___WEBPACK_IMPORTED_MODULE_18__.b,{node:props.portalNode,myProp:"newValue",myOtherProp:123}))};return react__WEBPACK_IMPORTED_MODULE_16___default.a.createElement(MyComponent,{componentToShow:"component-a"})}))}.call(this,__webpack_require__(147)(module))},639:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(48),__webpack_require__(23),__webpack_require__(30),__webpack_require__(17),__webpack_require__(31),__webpack_require__(19),__webpack_require__(32),__webpack_require__(24),__webpack_require__(108),__webpack_require__(73),__webpack_require__(54);var _rect,_rect2,_text,_hr,_text2,_rect3,_rect4,_hr2,_foreignObject,_rect5,_rect6,react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__),_storybook_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(76),___WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var withSourceLoader=__webpack_require__(118).withSource,__STORY__=(__webpack_require__(118).addSource,'import React from \'react\';\n\nimport { storiesOf } from \'@storybook/react\';\n\nimport { createHtmlPortalNode, createSvgPortalNode, InPortal, OutPortal } from \'..\';\n\nstoriesOf(\'SVG Portals\', module)\n    .add(\'works with SVGs\', () => {\n        const portalNode = createSvgPortalNode();\n\n        // From https://github.com/httptoolkit/react-reverse-portal/issues/2\n        return <div>\n            <svg>\n                <rect x={0} y={0} width={300} height={50} fill="gray"></rect>\n                <rect x={0} y={50} width={300} height={50} fill="lightblue"></rect>\n                <svg x={30} y={10}>\n                    <InPortal node={portalNode}>\n                        <text alignmentBaseline="text-before-edge" dominantBaseline="hanging" fill="red">\n                            test\n                        </text>\n                    </InPortal>\n                </svg>\n                <svg x={30} y={70}>\n                    <OutPortal node={portalNode} />\n                </svg>\n            </svg>\n        </div>\n\n    })\n    .add(\'can move content around within SVGs\', () => {\n        const portalNode = createSvgPortalNode();\n\n        return React.createElement(() => {\n            const [inFirstSvg, setSvgToUse] = React.useState(false);\n\n            return <div>\n                <button onClick={() => setSvgToUse(!inFirstSvg)}>\n                    Click to move the OutPortal within the SVG\n                </button>\n\n                <hr/>\n\n                <svg>\n                    <InPortal node={portalNode}>\n                        <text alignmentBaseline="text-before-edge" dominantBaseline="hanging" fill="red">\n                            test\n                        </text>\n                    </InPortal>\n\n                    <rect x={0} y={0} width={300} height={50} fill="gray"></rect>\n                    <rect x={0} y={50} width={300} height={50} fill="lightblue"></rect>\n\n                    <svg x={30} y={10}>\n                        { inFirstSvg && <OutPortal node={portalNode} /> }\n                    </svg>\n                    <svg x={30} y={70}>\n                        { !inFirstSvg && <OutPortal node={portalNode} /> }\n                    </svg>\n                </svg>\n            </div>\n        });\n    })\n    .add(\'persist DOM while moving within SVGs\', () => {\n        const portalNode = createSvgPortalNode();\n\n        return React.createElement(() => {\n            const [inFirstSvg, setSvgToUse] = React.useState(false);\n\n            return <div>\n                <button onClick={() => setSvgToUse(!inFirstSvg)}>\n                    Click to move the OutPortal within the SVG\n                </button>\n\n                <hr/>\n\n                <svg width={500} height={800}>\n                    <InPortal node={portalNode}>\n                        <foreignObject width="480" height="360">\n                            <video src="https://media.giphy.com/media/l0HlKghz8IvrQ8TYY/giphy.mp4" controls loop />\n                        </foreignObject>\n                    </InPortal>\n\n                    <rect x={0} y={0} width={500} height={380} fill="gray"></rect>\n                    <rect x={0} y={380} width={500} height={380} fill="lightblue"></rect>\n\n                    <svg x={10} y={10}>\n                        { inFirstSvg && <OutPortal node={portalNode} /> }\n                    </svg>\n                    <svg x={10} y={410}>\n                        { !inFirstSvg && <OutPortal node={portalNode} /> }\n                    </svg>\n                </svg>\n            </div>\n        })\n    });\n'),__ADDS_MAP__={"svg-portals--persist-dom-while-moving-within-svgs":{startLoc:{col:9,line:63},endLoc:{col:5,line:95},startBody:{col:49,line:63},endBody:{col:5,line:95}},"svg-portals--can-move-content-around-within-svgs":{startLoc:{col:9,line:30},endLoc:{col:5,line:62},startBody:{col:48,line:30},endBody:{col:5,line:62}},"svg-portals--works-with-svgs":{startLoc:{col:9,line:8},endLoc:{col:5,line:29},startBody:{col:28,line:8},endBody:{col:5,line:29}}};Object(_storybook_react__WEBPACK_IMPORTED_MODULE_12__.storiesOf)("SVG Portals",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/svg.stories.js",[],{},"/home/runner/work/react-reverse-portal/react-reverse-portal/stories",{})).add("works with SVGs",(function(){var portalNode=Object(___WEBPACK_IMPORTED_MODULE_13__.d)();return react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("svg",null,_rect||(_rect=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("rect",{x:0,y:0,width:300,height:50,fill:"gray"})),_rect2||(_rect2=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("rect",{x:0,y:50,width:300,height:50,fill:"lightblue"})),react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("svg",{x:30,y:10},react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(___WEBPACK_IMPORTED_MODULE_13__.a,{node:portalNode},_text||(_text=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("text",{alignmentBaseline:"text-before-edge",dominantBaseline:"hanging",fill:"red"},"test")))),react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("svg",{x:30,y:70},react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(___WEBPACK_IMPORTED_MODULE_13__.b,{node:portalNode}))))})).add("can move content around within SVGs",(function(){var _InPortal,_OutPortal,_OutPortal2,portalNode=Object(___WEBPACK_IMPORTED_MODULE_13__.d)();return react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement((function(){var _React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_11___default.a.useState(!1),2),inFirstSvg=_React$useState2[0],setSvgToUse=_React$useState2[1];return react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("button",{onClick:function onClick(){return setSvgToUse(!inFirstSvg)}},"Click to move the OutPortal within the SVG"),_hr||(_hr=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("hr",null)),react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("svg",null,_InPortal||(_InPortal=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(___WEBPACK_IMPORTED_MODULE_13__.a,{node:portalNode},_text2||(_text2=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("text",{alignmentBaseline:"text-before-edge",dominantBaseline:"hanging",fill:"red"},"test")))),_rect3||(_rect3=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("rect",{x:0,y:0,width:300,height:50,fill:"gray"})),_rect4||(_rect4=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("rect",{x:0,y:50,width:300,height:50,fill:"lightblue"})),react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("svg",{x:30,y:10},inFirstSvg&&(_OutPortal||(_OutPortal=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(___WEBPACK_IMPORTED_MODULE_13__.b,{node:portalNode})))),react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("svg",{x:30,y:70},!inFirstSvg&&(_OutPortal2||(_OutPortal2=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(___WEBPACK_IMPORTED_MODULE_13__.b,{node:portalNode}))))))}))})).add("persist DOM while moving within SVGs",(function(){var _InPortal2,_OutPortal3,_OutPortal4,portalNode=Object(___WEBPACK_IMPORTED_MODULE_13__.d)();return react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement((function(){var _React$useState4=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_11___default.a.useState(!1),2),inFirstSvg=_React$useState4[0],setSvgToUse=_React$useState4[1];return react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("button",{onClick:function onClick(){return setSvgToUse(!inFirstSvg)}},"Click to move the OutPortal within the SVG"),_hr2||(_hr2=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("hr",null)),react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("svg",{width:500,height:800},_InPortal2||(_InPortal2=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(___WEBPACK_IMPORTED_MODULE_13__.a,{node:portalNode},_foreignObject||(_foreignObject=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("foreignObject",{width:"480",height:"360"},react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("video",{src:"https://media.giphy.com/media/l0HlKghz8IvrQ8TYY/giphy.mp4",controls:!0,loop:!0}))))),_rect5||(_rect5=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("rect",{x:0,y:0,width:500,height:380,fill:"gray"})),_rect6||(_rect6=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("rect",{x:0,y:380,width:500,height:380,fill:"lightblue"})),react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("svg",{x:10,y:10},inFirstSvg&&(_OutPortal3||(_OutPortal3=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(___WEBPACK_IMPORTED_MODULE_13__.b,{node:portalNode})))),react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("svg",{x:10,y:410},!inFirstSvg&&(_OutPortal4||(_OutPortal4=react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(___WEBPACK_IMPORTED_MODULE_13__.b,{node:portalNode}))))))}))}))}.call(this,__webpack_require__(147)(module))}},[[276,1,2]]]);
//# sourceMappingURL=main.45e2f7f6861c526fce30.bundle.js.map